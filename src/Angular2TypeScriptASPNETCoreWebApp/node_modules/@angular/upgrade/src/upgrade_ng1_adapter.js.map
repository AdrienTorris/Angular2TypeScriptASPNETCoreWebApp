{"version":3,"file":"upgrade_ng1_adapter.js","sourceRoot":"","sources":["../../../../modules/@angular/upgrade/src/upgrade_ng1_adapter.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Directive, DoCheck, ElementRef, EventEmitter, Inject, OnChanges, OnInit, SimpleChange, SimpleChanges, Type} from '@angular/core';\n\nimport * as angular from './angular_js';\nimport {NG1_COMPILE, NG1_CONTROLLER, NG1_HTTP_BACKEND, NG1_SCOPE, NG1_TEMPLATE_CACHE} from './constants';\nimport {controllerKey} from './util';\n\nconst CAMEL_CASE = /([A-Z])/g;\nconst INITIAL_VALUE = {\n  __UNINITIALIZED__: true\n};\nconst NOT_SUPPORTED: any = 'NOT_SUPPORTED';\n\n\nexport class UpgradeNg1ComponentAdapterBuilder {\n  type: Type<any>;\n  inputs: string[] = [];\n  inputsRename: string[] = [];\n  outputs: string[] = [];\n  outputsRename: string[] = [];\n  propertyOutputs: string[] = [];\n  checkProperties: string[] = [];\n  propertyMap: {[name: string]: string} = {};\n  linkFn: angular.ILinkFn = null;\n  directive: angular.IDirective = null;\n  $controller: angular.IControllerService = null;\n\n  constructor(public name: string) {\n    const selector = name.replace(\n        CAMEL_CASE, (all: any /** TODO #9100 */, next: string) => '-' + next.toLowerCase());\n    const self = this;\n    this.type =\n        Directive({selector: selector, inputs: this.inputsRename, outputs: this.outputsRename})\n            .Class({\n              constructor: [\n                new Inject(NG1_SCOPE), ElementRef,\n                function(scope: angular.IScope, elementRef: ElementRef) {\n                  return new UpgradeNg1ComponentAdapter(\n                      self.linkFn, scope, self.directive, elementRef, self.$controller, self.inputs,\n                      self.outputs, self.propertyOutputs, self.checkProperties, self.propertyMap);\n                }\n              ],\n              ngOnInit: function() { /* needs to be here for ng2 to properly detect it */ },\n              ngOnChanges: function() { /* needs to be here for ng2 to properly detect it */ },\n              ngDoCheck: function() { /* needs to be here for ng2 to properly detect it */ },\n              ngOnDestroy: function() { /* needs to be here for ng2 to properly detect it */ },\n            });\n  }\n\n  extractDirective(injector: angular.IInjectorService): angular.IDirective {\n    const directives: angular.IDirective[] = injector.get(this.name + 'Directive');\n    if (directives.length > 1) {\n      throw new Error('Only support single directive definition for: ' + this.name);\n    }\n    const directive = directives[0];\n    if (directive.replace) this.notSupported('replace');\n    if (directive.terminal) this.notSupported('terminal');\n    const link = directive.link;\n    if (typeof link == 'object') {\n      if ((<angular.IDirectivePrePost>link).post) this.notSupported('link.post');\n    }\n    return directive;\n  }\n\n  private notSupported(feature: string) {\n    throw new Error(`Upgraded directive '${this.name}' does not support '${feature}'.`);\n  }\n\n  extractBindings() {\n    const btcIsObject = typeof this.directive.bindToController === 'object';\n    if (btcIsObject && Object.keys(this.directive.scope).length) {\n      throw new Error(\n          `Binding definitions on scope and controller at the same time are not supported.`);\n    }\n\n    const context = (btcIsObject) ? this.directive.bindToController : this.directive.scope;\n\n    if (typeof context == 'object') {\n      for (const name in context) {\n        if ((<any>context).hasOwnProperty(name)) {\n          let localName = context[name];\n          const type = localName.charAt(0);\n          const typeOptions = localName.charAt(1);\n          localName = typeOptions === '?' ? localName.substr(2) : localName.substr(1);\n          localName = localName || name;\n\n          const outputName = 'output_' + name;\n          const outputNameRename = outputName + ': ' + name;\n          const outputNameRenameChange = outputName + ': ' + name + 'Change';\n          const inputName = 'input_' + name;\n          const inputNameRename = inputName + ': ' + name;\n          switch (type) {\n            case '=':\n              this.propertyOutputs.push(outputName);\n              this.checkProperties.push(localName);\n              this.outputs.push(outputName);\n              this.outputsRename.push(outputNameRenameChange);\n              this.propertyMap[outputName] = localName;\n              this.inputs.push(inputName);\n              this.inputsRename.push(inputNameRename);\n              this.propertyMap[inputName] = localName;\n              break;\n            case '@':\n            // handle the '<' binding of angular 1.5 components\n            case '<':\n              this.inputs.push(inputName);\n              this.inputsRename.push(inputNameRename);\n              this.propertyMap[inputName] = localName;\n              break;\n            case '&':\n              this.outputs.push(outputName);\n              this.outputsRename.push(outputNameRename);\n              this.propertyMap[outputName] = localName;\n              break;\n            default:\n              let json = JSON.stringify(context);\n              throw new Error(\n                  `Unexpected mapping '${type}' in '${json}' in '${this.name}' directive.`);\n          }\n        }\n      }\n    }\n  }\n\n  compileTemplate(\n      compile: angular.ICompileService, templateCache: angular.ITemplateCacheService,\n      httpBackend: angular.IHttpBackendService): Promise<angular.ILinkFn> {\n    if (this.directive.template !== undefined) {\n      this.linkFn = compileHtml(\n          typeof this.directive.template === 'function' ? this.directive.template() :\n                                                          this.directive.template);\n    } else if (this.directive.templateUrl) {\n      const url = typeof this.directive.templateUrl === 'function' ? this.directive.templateUrl() :\n                                                                     this.directive.templateUrl;\n      const html = templateCache.get(url);\n      if (html !== undefined) {\n        this.linkFn = compileHtml(html);\n      } else {\n        return new Promise((resolve, err) => {\n          httpBackend(\n              'GET', url, null,\n              (status: any /** TODO #9100 */, response: any /** TODO #9100 */) => {\n                if (status == 200) {\n                  resolve(this.linkFn = compileHtml(templateCache.put(url, response)));\n                } else {\n                  err(`GET ${url} returned ${status}: ${response}`);\n                }\n              });\n        });\n      }\n    } else {\n      throw new Error(`Directive '${this.name}' is not a component, it is missing template.`);\n    }\n    return null;\n    function compileHtml(html: any /** TODO #9100 */): angular.ILinkFn {\n      const div = document.createElement('div');\n      div.innerHTML = html;\n      return compile(div.childNodes);\n    }\n  }\n\n  /**\n   * Upgrade ng1 components into Angular 2.\n   */\n  static resolve(\n      exportedComponents: {[name: string]: UpgradeNg1ComponentAdapterBuilder},\n      injector: angular.IInjectorService): Promise<angular.ILinkFn[]> {\n    const promises: Promise<angular.ILinkFn>[] = [];\n    const compile: angular.ICompileService = injector.get(NG1_COMPILE);\n    const templateCache: angular.ITemplateCacheService = injector.get(NG1_TEMPLATE_CACHE);\n    const httpBackend: angular.IHttpBackendService = injector.get(NG1_HTTP_BACKEND);\n    const $controller: angular.IControllerService = injector.get(NG1_CONTROLLER);\n    for (const name in exportedComponents) {\n      if ((<any>exportedComponents).hasOwnProperty(name)) {\n        const exportedComponent = exportedComponents[name];\n        exportedComponent.directive = exportedComponent.extractDirective(injector);\n        exportedComponent.$controller = $controller;\n        exportedComponent.extractBindings();\n        const promise: Promise<angular.ILinkFn> =\n            exportedComponent.compileTemplate(compile, templateCache, httpBackend);\n        if (promise) promises.push(promise);\n      }\n    }\n    return Promise.all(promises);\n  }\n}\n\nclass UpgradeNg1ComponentAdapter implements OnInit, OnChanges, DoCheck {\n  destinationObj: any = null;\n  checkLastValues: any[] = [];\n  componentScope: angular.IScope;\n  element: Element;\n  $element: any = null;\n\n  constructor(\n      private linkFn: angular.ILinkFn, scope: angular.IScope, private directive: angular.IDirective,\n      elementRef: ElementRef, private $controller: angular.IControllerService,\n      private inputs: string[], private outputs: string[], private propOuts: string[],\n      private checkProperties: string[], private propertyMap: {[key: string]: string}) {\n    this.element = elementRef.nativeElement;\n    this.componentScope = scope.$new(!!directive.scope);\n    this.$element = angular.element(this.element);\n    const controllerType = directive.controller;\n    if (directive.bindToController && controllerType) {\n      this.destinationObj = this.buildController(controllerType);\n    } else {\n      this.destinationObj = this.componentScope;\n    }\n\n    for (let i = 0; i < inputs.length; i++) {\n      (this as any /** TODO #9100 */)[inputs[i]] = null;\n    }\n    for (let j = 0; j < outputs.length; j++) {\n      const emitter = (this as any /** TODO #9100 */)[outputs[j]] = new EventEmitter();\n      this.setComponentProperty(\n          outputs[j], ((emitter: any /** TODO #9100 */) => (value: any /** TODO #9100 */) =>\n                           emitter.emit(value))(emitter));\n    }\n    for (let k = 0; k < propOuts.length; k++) {\n      (this as any /** TODO #9100 */)[propOuts[k]] = new EventEmitter();\n      this.checkLastValues.push(INITIAL_VALUE);\n    }\n  }\n\n  ngOnInit() {\n    if (!this.directive.bindToController && this.directive.controller) {\n      this.buildController(this.directive.controller);\n    }\n    let link = this.directive.link;\n    if (typeof link == 'object') link = (<angular.IDirectivePrePost>link).pre;\n    if (link) {\n      const attrs: angular.IAttributes = NOT_SUPPORTED;\n      const transcludeFn: angular.ITranscludeFunction = NOT_SUPPORTED;\n      const linkController = this.resolveRequired(this.$element, this.directive.require);\n      (<angular.IDirectiveLinkFn>this.directive.link)(\n          this.componentScope, this.$element, attrs, linkController, transcludeFn);\n    }\n\n    const childNodes: Node[] = [];\n    let childNode: any /** TODO #9100 */;\n    while (childNode = this.element.firstChild) {\n      this.element.removeChild(childNode);\n      childNodes.push(childNode);\n    }\n    this.linkFn(this.componentScope, (clonedElement, scope) => {\n      for (let i = 0, ii = clonedElement.length; i < ii; i++) {\n        this.element.appendChild(clonedElement[i]);\n      }\n    }, {\n      parentBoundTranscludeFn: (scope: any /** TODO #9100 */,\n                                cloneAttach: any /** TODO #9100 */) => { cloneAttach(childNodes); }\n    });\n    if (this.destinationObj.$onInit) {\n      this.destinationObj.$onInit();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    const ng1Changes: any = {};\n    Object.keys(changes).forEach(name => {\n      const change: SimpleChange = changes[name];\n      this.setComponentProperty(name, change.currentValue);\n      ng1Changes[this.propertyMap[name]] = change;\n    });\n    if (this.destinationObj.$onChanges) {\n      this.destinationObj.$onChanges(ng1Changes);\n    }\n  }\n\n  ngDoCheck() {\n    const destinationObj = this.destinationObj;\n    const lastValues = this.checkLastValues;\n    const checkProperties = this.checkProperties;\n    for (let i = 0; i < checkProperties.length; i++) {\n      const value = destinationObj[checkProperties[i]];\n      const last = lastValues[i];\n      if (value !== last) {\n        if (typeof value == 'number' && isNaN(value) && typeof last == 'number' && isNaN(last)) {\n          // ignore because NaN != NaN\n        } else {\n          const eventEmitter: EventEmitter<any> = (this as any /** TODO #9100 */)[this.propOuts[i]];\n          eventEmitter.emit(lastValues[i] = value);\n        }\n      }\n    }\n    if (this.destinationObj.$doCheck && this.directive.controller) {\n      this.destinationObj.$doCheck();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.destinationObj.$onDestroy && this.directive.controller) {\n      this.destinationObj.$onDestroy();\n    }\n  }\n\n  setComponentProperty(name: string, value: any) {\n    this.destinationObj[this.propertyMap[name]] = value;\n  }\n\n  private buildController(controllerType: any /** TODO #9100 */) {\n    const locals = {$scope: this.componentScope, $element: this.$element};\n    const controller: any =\n        this.$controller(controllerType, locals, null, this.directive.controllerAs);\n    this.$element.data(controllerKey(this.directive.name), controller);\n    return controller;\n  }\n\n  private resolveRequired(\n      $element: angular.IAugmentedJQuery, require: angular.DirectiveRequireProperty): any {\n    if (!require) {\n      return undefined;\n    } else if (typeof require == 'string') {\n      let name: string = <string>require;\n      let isOptional = false;\n      let startParent = false;\n      let searchParents = false;\n      if (name.charAt(0) == '?') {\n        isOptional = true;\n        name = name.substr(1);\n      }\n      if (name.charAt(0) == '^') {\n        searchParents = true;\n        name = name.substr(1);\n      }\n      if (name.charAt(0) == '^') {\n        startParent = true;\n        name = name.substr(1);\n      }\n\n      const key = controllerKey(name);\n      if (startParent) $element = $element.parent();\n      const dep = searchParents ? $element.inheritedData(key) : $element.data(key);\n      if (!dep && !isOptional) {\n        throw new Error(`Can not locate '${require}' in '${this.directive.name}'.`);\n      }\n      return dep;\n    } else if (require instanceof Array) {\n      const deps: any[] = [];\n      for (let i = 0; i < require.length; i++) {\n        deps.push(this.resolveRequired($element, require[i]));\n      }\n      return deps;\n    }\n    throw new Error(\n        `Directive '${this.directive.name}' require syntax unrecognized: ${this.directive.require}`);\n  }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}